
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MF3D Stimulus Editor &#8212; MF3D 1.0 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/mf3d.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Video Parameter Estimation GUI" href="MF3D-Video-Parameter-Estimation-GUI.html" />
    <link rel="prev" title="MF3D Release 2" href="MF3D-Release-2.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="MF3D-Video-Parameter-Estimation-GUI.html" title="Video Parameter Estimation GUI"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MF3D-Release-2.html" title="MF3D Release 2"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MF3D 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MF3D Stimulus Editor</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mf3d-stimulus-editor">
<h1>MF3D Stimulus Editor<a class="headerlink" href="#mf3d-stimulus-editor" title="Permalink to this headline">¶</a></h1>
<p>We provide a graphical user interface (GUI) programmed in Matlab <code class="docutils literal notranslate"><span class="pre">MF3D_StimEditor.m</span></code> to help users of the MF3D R1 stimulus set
to download, select, load, edit, analyse and save the images that they wish to use in
their experiments. The GUI is intended to provide an easy way for users
to select subsets of the 14,000 images and apply simple image
manipulations without requiring them to write their own code. However,
the code can easily be adapted by users who wish to perform other
operations that are not currently implemented in the GUI.</p>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/Phenomenal-Cat/MF3D-Tools">MF3D Tools</a> contains scripts that can be used to downloaded the MF3D R1 stimulus sets from Figshare, unzip them and reorganize the directory structure. If you are using Matlab, this can be done using the
<code class="docutils literal notranslate"><span class="pre">MF3D_Installer.m</span></code> GUI as follows:</p>
<ul class="simple">
<li><p>Clone the <a class="reference external" href="https://github.com/Phenomenal-Cat/MF3D-Tools">MF3D-Tools</a> GitHub repository by opening a terminal window, navigating to the directory where you want MF3D-Tools installed and run:</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/Phenomenal-Cat/MF3D-Tools.git
</pre></div>
</div>
<ul class="simple">
<li><p>Alternatively, you can <a class="reference external" href="https://github.com/Phenomenal-Cat/MF3D-Tools/archive/master.zip">download MF3D Tools</a> directly and unzip the folder.</p></li>
<li><p>Open Matlab, navigate to the ‘MF3D Tools’ folder and run <code class="docutils literal notranslate"><span class="pre">MF3D_Installer.m</span></code> in the Matlab command line. Note that the script requires permissions to move the code and image files around.</p></li>
</ul>
<div class="figure align-right">
<a class="align-right reference internal image-reference" href="_images/MF3D_Installer.png"><img alt="MF3D Installer GUI" class="align-right" src="_images/MF3D_Installer.png" style="width: 400px;" /></a>
</div>
<ul class="simple">
<li><p>The MF3D Installer GUI window appears. Select a destination folder where you would like the MF3D R1 stimulus set installed. If the MF3D R1 stimulus set is already fully or partially installed, the corresponding fields will turn green.</p></li>
<li><p>Select which subsets of the MF3D R1 stimulus set you want to install using the check boxes.</p></li>
<li><p>Click the <strong>Download</strong> button to begin download and unzipping. If the files are already downloaded (indicated by a full progress bar) but the files have not been reorganized, select <strong>Reorganize</strong> button.</p></li>
</ul>
<p>The parameters used to generate each image in the MF3D R1 stimulus set
are provided in the accompanying spreadsheets (.csv files) - one for the
expression set and another for the identity set. When the GUI is
initialized it first reads these data into Matlab.</p>
</div>
<div class="section" id="stimulus-selection">
<h2>Stimulus selection<a class="headerlink" href="#stimulus-selection" title="Permalink to this headline">¶</a></h2>
<p>The stimulus set contains 14,000 images, which is more than a single
experiment is likely to need. In order to simplify the selection of a
subset of the stimuli, the top panel of the GUI allows the selection by
stimuli by a variety of parameters. The drop down menu at the top left
allows you to select between the ‘Expressions’ and ‘Identities’ subsets,
and will activate and deactivate the corresponding parameter lists.
Multiple rows can be selected in each active parameter list, and the
total number of images currently selected appears in the top right hand
corner of the GUI.</p>
<div class="figure align-default">
<img alt="MF3D Stimulus Editor GUI selection panel" src="_images/MF3D_Tools_StimEditor_Fig3.png" />
</div>
</div>
<div class="section" id="preview-panel">
<h2>Preview panel<a class="headerlink" href="#preview-panel" title="Permalink to this headline">¶</a></h2>
<p>Whenever the stimulus selection is changed, the list of selected images
is updated in the dropdown menu of the <code class="docutils literal notranslate"><span class="pre">Preview</span> <span class="pre">panel</span></code>. Selected
images can be previewed by either selecting the file name in the
dropdown menu, or using the slider to scroll through the selected
images.</p>
</div>
<div class="section" id="image-masking">
<h2>Image masking<a class="headerlink" href="#image-masking" title="Permalink to this headline">¶</a></h2>
<p>Each color image in the MF3D R1 stimulus set has a corresponding label
map, which can be used to mask parts of the image in order to create new
variations. In the <code class="docutils literal notranslate"><span class="pre">Masking</span> <span class="pre">panel</span></code> of the stimulus editor GUI users
can select color-coded parts of the face, body and background to toggle
on or off, which will update the <code class="docutils literal notranslate"><span class="pre">Preview</span> <span class="pre">panel</span></code> image. Additional
controls to the left of the <code class="docutils literal notranslate"><span class="pre">Masking</span> <span class="pre">panel</span></code> provide the following
functionality:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">Smoothing</span></code>: Apply image smoothing to the label map before
masking the color image. This option reduces pixelated edges in the
alpha transparency layer of the final images, as can be seen in the
<code class="docutils literal notranslate"><span class="pre">Preview</span> <span class="pre">panel</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Kernel</span> <span class="pre">width</span></code>: Sets the width of the smoothing kernel (pixels)
applied to the label map before masking.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Background</span></code>: Sets the type of background to use for the output
images. The default is transparent (same as input images), but it can
also be set to use a solid color or a Fourier scrambled version of
the original image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ellipse</span> <span class="pre">crop</span></code>: Displays an ellipse in the <code class="docutils literal notranslate"><span class="pre">Preview</span> <span class="pre">panel</span></code> that
can be dragged, scaled and resized with the mouse. Pixels outside of
the ellipse will have alpha transparency values of 0 (fully
transparent) when saved. When ellipse crop is enabled, the background
selected will only appear inside the ellipse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Isotropic</span></code>: Maintain a 1:1 aspect ratio ellipse (i.e. circular)
crop.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cyclopean</span> <span class="pre">center</span></code>: this will center the cropping ellipse on the
‘cyclopean eye’ (indicated in the <code class="docutils literal notranslate"><span class="pre">Preview</span> <span class="pre">panel</span></code> by a white
astrisk) by finding the centroid of each group of pixels belonging to
the ‘eye’ label group (indicated by red astrisks) and calculating the
mid-point. Turning this option on will cause the location of the
avatar’s body on the screen to shift as the head turns, but will keep
the eyes either side of the centre on the horizontal meridian of the
screen across head angles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Radius</span> <span class="pre">(px)</span></code>: Sets the radius of the elliptical crop selection in
pixels.</p></li>
</ul>
<div class="figure align-default">
<img alt="MF3D Stimulus Editor GUI preview panel" src="_images/MF3D_Tools_StimEditor_Fig2.png" />
</div>
</div>
<div class="section" id="output-formatting-and-rescaling">
<h2>Output formatting and rescaling<a class="headerlink" href="#output-formatting-and-rescaling" title="Permalink to this headline">¶</a></h2>
<p>If you want to save edited versions of the selected stimuli as image files
then you can use the options in the <code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">panel</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">format</span></code>: select the image file format that you want to save the new images to.
If any portion of the edited stimuli is transparent then ,png will be the only output
File format option.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Resolution</span></code>: if you intend to present the stimuli at a lower resolution than their original
4K then you may want to scale them down in order to reduce file size. Since most visual stimulus
presentation software can re-scale images on-the-fly, this is not essential.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Color</span></code>: sets the color properties of the saved output images. Options include original, grayscale,
and hue inverted.</p></li>
</ul>
</div>
<div class="section" id="image-analysis-and-normalization">
<h2>Image analysis and normalization<a class="headerlink" href="#image-analysis-and-normalization" title="Permalink to this headline">¶</a></h2>
<p>In traditional reductionist approaches to vision science, it is often
considered desirable to either quantify or control the
low-level visual properties of the stimuli. The MF3D Stimulus Editor
allows users to run various third party functions on the selected stimuli,
for example:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.mapageweb.umontreal.ca/gosselif/SHINE/">SHINE Toolbox</a> (<a class="reference external" href="https://doi.org/10.3758/BRM.42.3.671">Willenbockel et al., 2010</a>) for normalization of contrast, luminance, spectral power.</p></li>
<li><p><a class="reference external" href="http://www.saliencytoolbox.net/">Saliency Toolbox</a> (<a class="reference external" href="https://doi.org/10.1109/34.730558">Itti et al., 1998</a>; <a class="reference external" href="https://resolver.caltech.edu/CaltechAUTHORS:20160315-111145907">Harel et al., 2007</a>; etc.) for quantification of visual saliency within images.</p></li>
<li><p><a class="reference external" href="https://www.mathworks.com/matlabcentral/fileexchange/40640-computational-colour-science-using-matlab-2e">Computational Colour Science Toolbox</a></p></li>
</ul>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/MF3D_Logo_black.svg" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="MF3D-Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Release-1.html">MF3D Release 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Release-2.html">MF3D Release 2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MF3D Tools - Stimulus Editor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stimulus-selection">Stimulus selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preview-panel">Preview panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#image-masking">Image masking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-formatting-and-rescaling">Output formatting and rescaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#image-analysis-and-normalization">Image analysis and normalization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Video-Parameter-Estimation-GUI.html">MF3D Tools - Video Parameter GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Video-Clip-Compiler.html">Using MF3D_ConcatClips.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Video-Clip-Compiler.html#example">Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Parameterizing-anatomical-variations.html">Methods - Face Space</a></li>
<li class="toctree-l1"><a class="reference internal" href="MF3D-Research.html">MF3D Publications</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="MF3D-Release-2.html"
                        title="previous chapter">MF3D Release 2</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="MF3D-Video-Parameter-Estimation-GUI.html"
                        title="next chapter">Video Parameter Estimation GUI</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="MF3D-Video-Parameter-Estimation-GUI.html" title="Video Parameter Estimation GUI"
             >next</a> |</li>
        <li class="right" >
          <a href="MF3D-Release-2.html" title="MF3D Release 2"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MF3D 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">MF3D Stimulus Editor</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Aidan Murphy.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>